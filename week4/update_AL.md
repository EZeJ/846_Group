# Week X Feedback: [Topic Title]

**Authors:** [Student Name 1, Student Name 2, Student Name 3]  

## 1. Counterexample Problems

### Problem A_1: Fix a Username Validation Bug

**Task Description:**  
You are given an implementation of is_valid_username(username: str) -> bool that is intended to follow the policy above.
Identify the mismatch between the policy and the code, and propose the minimal code change needed to make the implementation comply with the policy.

**Starter Code:**  
```python
def is_valid_username(username: str) -> bool:
    """
    Return True if `username` is valid.

    Rules:
    - Not None; trimmed before validation
    - Length 3–20 characters
    - Starts with a letter
    - Contains only alphanumeric characters or `_`
    - Does not end with `_`
    """
    if username is None:
        return False

    username = username.strip()

    if len(username) < 3 or len(username) > 20:
        return False

    if not username[0].isalpha():
        return False

    for ch in username:
        if not (ch.isalnum() or ch == "_"):
            return False

    return True
```

---

### 2. Guidelines that didn't work for Problem A_1

#### Guideline 2: Converse with the LLM to analyze the problem 
**Prompt and Context:**  
I had to prompt the agent several times to lead it to the actual result, and unfortunately it was still wrong in the end.
Prompt:
_You are a senior requirements engineer.
Analyze the broader user and business implications of username validation.
Identify ambiguities in cultural naming, Unicode support, accessibility, and future scalability.
Ask clarifying questions before evaluating the function._

**Solution or Output generated by GitHub Copilot:**  
Give the answer here generated by GitHub Copilot for the counterexaple that you think is not the correct/optimal answer. 

The model produced this output, which was not write eventually.

```
if not ('a' <= username[0].lower() <= 'z'):
    return False
```
...

---

### 3. Updated Guidelines that worked for Problem A_1

#### Guideline 2: Converse with the LLM to analyze the problem 
**Prompt and Context:**  
The idea is to use conversation for systems, workflows, policies, or user-facing features. Use precision for bugs, refactors, transformations, and calculations.

So the better prompt would look like this:

_Review the following function.
State exactly what usernames it accepts and rejects.
Identify any logical edge cases or inconsistencies.
Suggest minimal changes only if necessary to improve correctness.
Do not introduce new rules._

**Solution or Output generated by GitHub Copilot:**  
The model gave the right answer from the very first prompt.

User: Review the following function.
State exactly what usernames it accepts and rejects.
Identify any logical edge cases or inconsistencies.
Suggest minimal changes only if necessary to improve correctness.
Do not introduce new rules.

GitHub Copilot: Read [](file:///Users/alinalytovchenko/Documents/Code/846_Group/week4/drafts/updated_guideline_2/problem_1.py)

## Review of `is_valid_username()`

### Usernames Accepted
- 3–20 characters (after trimming)
- Starts with a letter (a–z, A–Z)
- Contains only alphanumeric characters and underscores (`_`)

Examples that pass: `"abc"`, `"User_name"`, `"a_b_c_123"`

### Usernames Rejected
- `None` or anything not a string
- Empty or fewer than 3 characters
- More than 20 characters
- Starts with non-letter (number, underscore, special character)
- Contains special characters (except `_`)
- **Does NOT check if it ends with `_`** (documented rule violation)

Examples that fail: `"ab"` (too short), `"_user"` (starts with `_`), `"user!"` (special char)

### Critical Issue

The docstring specifies **"Does not end with `_`"** but the function **never validates this rule**. 

A username like `"user_"` would incorrectly pass validation.

### Minimal Fix Required

Add a single check after the loop:

```python
if username[-1] == "_":
    return False
```

Place it right before the final `return True`. This enforces the stated rule without introducing new constraints.

User: implement the fix

GitHub Copilot: Using "Replace String in File"


```

```
Done. The function now rejects usernames ending with `_`.

Made changes.

---